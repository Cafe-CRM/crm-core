<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" th:href="@{/st.css}" type="text/css"/>

</head>
<body>
<header>
    <div class="container" style="margin-top:50px; ">
        <div class="row">

            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand">Project Name</a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="#">Заказы</a></li>
                        <li><a href="#">Что-то другое</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</header>


<button class="btn btn-default" style="float: left">Редактирование столов</button>

<div class="container" style=" box-shadow: 0 3px 6px 0; border-radius: 10px; background: #ffffff; min-width: 1200px">

    <!-- модальное окно с созданием счета-->
    <div th:replace="addCalculateFragment :: calculateModal"></div>
    <!-- -->

    <br/>
    <div th:each="calculate : ${listCalculate}">

        <!--шапка панели -->
        <div class="panel panel-primary">
            <div class="panel-heading" style="height: 50px">
                <div class="panel-title">

                    <form style="float: left" method="post" action="/refresh-board" th:id="'formRef'+${calculate.id}">
                        <input type="hidden" name="calculateId" th:value="${calculate.id}"/>
                        <button style="background: rgba(255,255,255,0); border: none" type="submit"><img width="30px"
                                                                                                         height="30px"
                                                                                                         src="http://icon-icons.com/icons2/37/PNG/512/sinchronize_theapplication_thearrow_2888.png"/>
                        </button>

                    </form>

                    <select style="width:130px; float: left; height: 34px; margin-left: 20px; font-size:18px "
                            class="form-control" th:form="'formRef'+${calculate.id}" name="boardId">
                        <option th:value="${calculate.getBoard().id}"
                                th:text="${calculate.getBoard().name}"></option>
                        <p th:each="b : ${listBoard}">
                        <p th:if="(${calculate.getBoard().name} != ${b.name})">
                            <option th:value="${b.id}" th:text="${b.name}"></option>
                        </p>
                        </p>
                    </select>


                    <form th:id="'form' + ${calculate.id}" action="/state-panel" method="post">
                        <input type="hidden" th:value="${calculate.id}" name="calculateId"/>
                    </form>

                    <button th:onclick="'formsub(\'' +'form'+ ${calculate.id} + '\');'"
                            style="float: left; width: 800px; word-wrap: break-word; font-size: 20px; height: 40px; text-align: center; background: rgba(255,0,0,0);border: none"
                            data-toggle="collapse" th:href="'#accord' + ${calculate.id}"
                            th:text="${calculate.description}" th:value="${calculate.id}">
                    </button>


                    <button style="background: rgba(255,255,255,0); border: none;margin-left: 70px" type="submit"><img
                            width="30px" height="30px"
                            src="http://www.clker.com/cliparts/t/f/J/i/7/C/amazon-style-close-button-hi.png"/>
                    </button>


                </div>
                <!-- -->
            </div>

            <!--выпадающий контент панели -->
            <div th:id="'accord' + ${calculate.id}" class="panel-collapse collapse "
                 th:classappend="${calculate.statePanel} ? 'in' : ''">

                <div class="panel-body" style="background: #f0efee">


                    <!--модальное окно создания клиента-->
                    <div th:replace="addClientFragment :: clientModal"></div>
                    <!---->

                    <button class="btn btn-default" style="float: left; margin-right: 200px">Меню
                    </button>


                    <div style="float: left;width: 400px;height: 42px;box-shadow: 0 0px 3px 0;border-radius: 5px" th:if="(${calculate.getCard()})">
                        <h5 style="float: left;font-size: 20px">$</h5>
                        <input  style="float: left;height: 20px;width: 20px;margin-top: 11px;margin-right: 30px"
                               type="checkbox"/>

                        <h4 style="float: left;font-size: 20px" th:text="${calculate.getCard().name}+'.'"></h4>
                        <h4 style="float: left;font-size: 20px;margin-left: 40px;"
                            th:text="'баланс: ' + ${calculate.getCard().balance}"></h4>

                        <input th:id="'in' + ${calculate.id}"
                               style="float:right;width:60px;font-size: 20px;margin-top: 4px"
                               class="form-control" type="text"
                               th:value="${calculate.getCard().discount}"/>

                    </div>

                    <div style="float: left;width: 400px;box-shadow: 0 0px 3px 0;border-radius: 5px" th:if="(${calculate.getCard()} == null)">
                        <div style="float: left; height: 1px; width:240px;margin-left: 70px;"><h4
                                style="font-size: 20px;">Карта не
                            подключена</h4></div>
                        <input th:id="'in' + ${calculate.id}" style="width:60px;font-size: 20px;float: right"
                               class="form-control" type="text"
                               value="0"/>
                    </div>


                    <p style=" float: left;font-size: 28px">%</p>
                    <br/> <br/><br/>
                    <h5 style="float: left; margin-left: 200px  ">Описание</h5>
                    <h5 style="float: left;margin-left: 125px">Время создания</h5>
                    <h5 style="float: left;margin-left: 30px">Осталось чел</h5>
                    <h5 style="float: left;margin-left: 50px">$ Меню</h5>
                    <h5 style="float: left;margin-left: 60px">$ Время</h5>
                    <h5 style="float: left;margin-left: 60px">Общая сумма</h5>
                    <br/>
                    <div th:each="client : ${calculate.getClient()}">

                        <div style="background: #dbdbdd;margin-top: 15px; border-radius: 3px;height: 34px;">


                            <form th:id="'mainForm' + ${client.id}" method="post" action="/calculate-price">
                                <input name="discountInput" th:id="'in1' + ${client.id}" type="hidden"/>
                                <input type="hidden" name="clientId" th:value="${client.id}"/>
                                <button th:onclick="'linkinput(\'' +'in1'+ ${client.id} + '\',\'' +'in'+ ${calculate.id} + '\');'"
                                        type="submit" class="btn btn-default but1"
                                        style="float: left;margin-right:5px;"><img width="16px" height="16px"
                                                                                   src="http://icon-icons.com/icons2/936/PNG/512/dollar-symbol_icon-icons.com_73598.png"/>
                                </button>
                            </form>

                            <select name="numberToCalculate" th:form="'mainForm' + ${client.id}" class="form-control "
                                    style="width:85px;height: 34px; margin-right: 20px;font-size: 17px; float: left">
                                <option value="Всех">Всех</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>


                            <h4 style="float: left; width: 280px; height: 1px;"
                                th:text="${client.description}"></h4>
                            <h4 style="float: left;width: 135px; height: 1px;"
                                th:text="${client.timeStart}"></h4>
                            <h4 style="float: left;width: 110px; height: 1px;"
                                th:text="${client.number}"></h4>
                            <h4 style="float: left;width: 110px; height: 1px;"
                                th:text="${client.priceMenu}"></h4>
                            <h4 style="float: left;width: 110px; height: 1px;"
                                th:text="${client.priceTime}"></h4>
                            <h4 style="float: left; height: 1px;width: 80px"
                                th:text="${client.allPrice}"></h4>
                            <h4 style="float: left; "
                                th:text="' ≈ ' + ${client.round} "></h4>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    function linkinput(j, j1) {
        var elem1 = document.getElementById(j1);
        var elem = document.getElementById(j);
        elem.value = elem1.value;
    }
    ;
    function formsub(form) {
        var form1 = document.getElementById(form);
        form1.submit();
    }
    ;


</script>


</body>
</html>