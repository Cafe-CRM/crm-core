<html xmlns:th="http://www.thymeleaf.org">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>

<div th:fragment="checkModal">

    <style>
        .cent {
        text-align: center;
        }
    </style>
    <div>
        <button th:onclick="'ajaxModal(\'' + ${calculate.id} + '\', \'' + ${cardEnable} + '\');'" style="float: right" class="btn btn-danger">
            Рассчитать
        </button>
    </div>
    <br/><br/>
    <div th:id="'checkModal' + ${calculate.id}" class="modal"><!--class="modal "-->
        <div class="modal-dialog " style="width: 1000px;margin-top: 50px">
            <div class="modal-content">
                <div class="modal-header">
                    <button style="background: rgba(170,170,170,0);border: none;float: right;margin-top: 10px;margin-right: 10px"
                            type="button" data-dismiss="modal">
                        <i class="fa fa-times" aria-hidden="true" style="font-size: 30px"></i>
                    </button>
                    <p th:id="'head' + ${calculate.id}" style="font-size: 30px;margin-left: 10px;margin-top: 20px; text-align: center">
                        Пусто </p>
                    <div th:id="'errorMessageCheckModal' + ${calculate.id}"></div>
                </div>
                <div class="modal-body">
                    <div style="width: 968px; height: 400px;border-radius:5px;box-shadow: 0px 0px 2px 1px; overflow: auto; margin-bottom: 2%">

                        <table class="table ">

                            <thead>
                            <tr style="font-size: 17px">
                                <th class="cent" style="text-align: center;" th:if="${cardEnable}">Карта</th>
                                <th class="cent">Описание</th>
                                <th class="cent">Время</th>
                                <th class="cent">₽ за время</th>
                                <th class="cent">Заказ</th>
                                <th class="cent">По себестоимости</th>
                                <th class="cent">Скидка</th>
                                <th class="cent" th:if="${cardEnable}">С карты</th>
                                <th class="cent">Кэш</th>
                            </tr>

                            </thead>

                            <tbody th:id="'tb' + ${calculate.id}" style="font-size: 20px">

                            </tbody>
                        </table>
                    </div>
                    <div style="width: 968px;">
                        <div class="row">
                            <div class="col-md-8" style="margin-right: 7px;">
                                <button type="button" data-toggle="modal"
                                        th:attr="data-target='#enterDebtorName'+${calculate.id }"
                                        style="font-size:20px;" class="btn btn-warning" id="dolg" >Рассчитать в долг
                                </button>
                                <button th:if="${bossFunctional}" type="button" data-toggle="modal"
                                        th:attr="data-target='#changePriceAmount'+${calculate.id }"
                                        style="font-size:20px; float: right; margin-right: 160px;"
                                        class="btn btn btn-primary changeSumButton" id="changeSumm" >Изменить итоговую сумму
                                </button>

                            </div>


                            <div class="col-md-1">
                                <th:block th:if="${cardEnable}">
                                    <p style="font-size: 30px;">Карты:<br/>Кэш:</p>
                                </th:block>

                                <th:block th:unless="${cardEnable}">
                                    <p style="font-size: 30px;">Кэш:</p>
                                </th:block>
                            </div>

                            <div class="col-md-1 nopadding">
                                <p style="font-size: 30px;" th:id="'all' + ${calculate.id}"></p>
                            </div>

                            <div class="col-md-1">
                                <button th:id="'closeClientButton' + ${calculate.id}" style="font-size:20px;"
                                        class="btn btn btn-danger " th:onclick="'closeClient(\'' + ${calculate.id} + '\')'">Рассчитать
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-8" style="margin-right: 7px;">
                                <button  data-toggle="modal"
                                         th:attr="data-target='#withoutCheckModal'+${calculate.id }"
                                         style="font-size:20px; float: right; margin-right: 160px;"
                                         class="btn btn btn-danger">Рассчитать без чека
                                </button>
                            </div>
                        </div>
                    </div>
                    <!--Error modal when trying close calculate with paused client-->

                </div>
            </div>
        </div>
    </div>

    <div th:if="${bossFunctional}" th:id="'changePriceAmount' + ${calculate.id}" class="modal fade" role="dialog">
        <div class="modal-dialog" style="top: 120px; width: 550px;">
            <div class="modal-content">
                <div class="modal-header" style="padding-bottom: 0px;">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 th:id="'promptText' + ${calculate.id}" style="font-size: 19px; font-weight: 600;">Введите новую сумму заказа и отправьте код подверждения.</h3>
                    <p style="display: none;" th:id="'newAmountError' + ${calculate.id}"></p>
                </div>

                <div class="modal-body" style="height: 110px;">
                    <form class="form-horizontal" role="form">
                        <div class="form-group" style="height: 30px;">
                            <label th:for="'newAmount' + ${calculate.id}" class="col-md-4 control-label">Новая сумма</label>
                            <div class="col-md-5">
                                <input type="number" class="form-control" th:id="'newAmount' + ${calculate.id}"
                                       name="newAmount" required="" placeholder="Новая сумма" value="0"/>
                            </div>
                        </div>
                        <div th:id="'confirmPassword' + ${calculate.id}" class="form-group hidden">
                            <label th:for="'pass' + ${calculate.id}" class="col-md-4 control-label">Код</label>
                            <div class="col-md-5">
                                <input class="form-control" th:id="'pass' + ${calculate.id}"
                                       name="password" required="" type="password"/>
                            </div>
                        </div>
                    </form>

                </div>
                <div class="modal-footer">
                    <button type="button"
                            th:id="'sendCode' + ${calculate.id}"
                            th:onclick="'sendRecalculateToken(\'' + ${calculate.id} + '\')'"
                            style="font-size:20px;" class="btn btn-primary">Отправить код
                    </button>
                    <button th:if="${calculate.state}" type="button"
                            th:onclick="'closeClientWithNewAmount(\'' + ${calculate.id} + '\')'"
                            style="font-size:20px;" class="btn btn-danger confirmButton hidden">Рассчитать
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--<div th:if="${bossFunctional}" th:id="'changePriceAmount' + ${calculate.id}" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <p class="newAmountError" style="display: none;" th:id="'newAmountError' + ${calculate.id}"></p>
                    <h3 style="font-size: 19px; font-weight: 600;">В админ-конференцию был послан короткий код.</h3>
                    <h3 style="font-size: 19px; font-weight: 600;">Используйте его для подтверждения операции.</h3>
                </div>

                <div class="modal-body">
                    <form class="form-horizontal" role="form">
                        <div class="form-group">
                            <label th:for="'newAmount' + ${calculate.id}" class="col-md-4 control-label">Новая сумма</label>
                            <div class="col-md-5">
                                <input type="number" class="form-control" th:id="'newAmount' + ${calculate.id}"
                                       name="newAmount" required="" placeholder="Новая сумма" value="0"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label th:for="'masterPassword' + ${calculate.id}" class="col-md-4 control-label">Код</label>
                            <div class="col-md-5">
                                <input class="form-control" th:id="'masterPassword' + ${calculate.id}"
                                       name="masterPassword" required="" placeholder="Введите полученный код" type="password"/>
                            </div>
                        </div>
                    </form>

                </div>
                <div class="modal-footer">
                    <button type="button"
                            th:onclick="'sendToken()'"
                            style="font-size:20px;" class="btn btn-primary">Отправить код повторно
                    </button>
                    <button type="button"
                            th:onclick="'closeClientWithNewAmount(\'' + ${calculate.id} + '\')'"
                            style="font-size:20px;" class="btn btn-danger">Рассчитать
                    </button>
                </div>
            </div>
        </div>
    </div>-->

    <div th:id="'enterDebtorName' + ${calculate.id}" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <p class="messageAd" style="display: none;" th:id="'debtorNameError' + ${calculate.id}"></p>
                </div>

                <div class="modal-body">
                    <form class="form-horizontal" role="form">
                        <div class="form-group">
                            <label th:for="'debtorName' + ${calculate.id}" class="col-md-4 control-label">Имя должника</label>
                            <div class="col-md-5">
                                <input class="form-control" th:id="'debtorName' + ${calculate.id}"
                                       name="user" required="" placeholder="Имя должника"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label th:for="'paidAmount' + ${calculate.id}" class="col-md-4 control-label">Уплаченная сумма</label>
                            <div class="col-md-5">
                                <input class="form-control" th:id="'paidAmount' + ${calculate.id}"
                                       name="paidAmount" required="" placeholder="Уплаченная сумма" value="0"/>
                            </div>
                        </div>
                    </form>

                </div>
                <div class="modal-footer">
                    <button type="button"
                            th:onclick="'closeClientDebt(\'' + ${calculate.id} + '\');'"
                            style="font-size:20px;" class="btn btn-danger">ОК
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div th:id="'withoutCheckModal'+${calculate.id}" class="modal fade" role="dialog">
        <div class="modal-dialog" style="top: 120px; width: 550px;">
            <div class="modal-content">
                <div class="modal-header" style="padding-bottom: 0px;">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 th:id="'headerTextWithoutCheckModal' + ${calculate.id}" style="font-size: 19px; font-weight: 600;">Отправьте код подтверждения.</h3>
                    <p style="display: none" th:id="'withoutCheckErrorMessage' +${calculate.id}"></p>
                </div>

                <div class="modal-body">
                    <form class="form-horizontal" role="form">
                        <div class="form-group" style="text-align: center" th:id="'bodyTextWithoutCheckModal' + ${calculate.id}">
                            <p style="font-size: 18px">Будет отправлен код в админ-конферению
                                для подтверждения рассчета без чека!</p>
                        </div>
                        <div class="form-group hidden" th:id="'tokenFormWithoutCheckModal' + ${calculate.id}">
                            <label th:for="'passWithoutCheck' + ${calculate.id}" class="col-md-4 control-label">Код</label>
                            <div class="col-md-5">
                                <input class="form-control" th:onfocus="'cleanWithoutCheckModal(\'' + ${calculate.id} + '\')'"
                                       th:id="'passWithoutCheck' + ${calculate.id}"
                                       name="password" required="" type="password"/>
                            </div>
                        </div>
                    </form>

                </div>
                <div class="modal-footer">
                    <button type="button"
                            th:onclick="'sendWithoutCheckToken(\'' + ${calculate.id} + '\')'"
                            style="font-size:20px;" class="btn btn-primary"
                            th:id="'sendTokenButtonWithoutCheckModal' + ${calculate.id}">Отправить код
                    </button>
                    <button type="button"
                            th:onclick="'closeClientWithoutCheck(\'' + ${calculate.id} + '\')'"
                            style="font-size:20px;" class="btn btn-danger confirmButton hidden"
                            th:id="'closeClientWithoutCheckButtonModal' + ${calculate.id}">Рассчитать
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div th:id="'confirmCostPriceMenuModal' + ${calculate.id}" class="modal fade" role="dialog">
        <div class="modal-dialog" style="top: 120px; width: 550px;">
            <div class="modal-content">
                <div class="modal-header" style="padding-bottom: 0px">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 style="font-size: 19px; font-weight: 600;">В админ-конференцию был послан короткий код.
                        Используйте его для подтверждения действия.</h3>
                    <p style="display: none;" th:id="'costPriceErrorMessage' + ${calculate.id}"></p>
                </div>

                <div class="modal-body">
                    <form class="form-horizontal" role="form">
                        <div class="form-group" style="text-align: center">
                            <b>Один или более клиентов будут рассчитаны по себестоимости.</b>
                        </div>
                        <div class="form-group">
                            <label th:for="'passCostPriceMenu' + ${calculate.id}" class="col-md-4 control-label">Код</label>
                            <div class="col-md-5">
                                <input class="form-control" th:id="'passCostPriceMenu' + ${calculate.id}"
                                       name="password" required="" type="password"/>
                            </div>
                        </div>
                    </form>

                </div>
                <div class="modal-footer">
                    <button type="button"
                            th:onclick="'sendCostPriceMenuToken(\'' + ${calculate.id} + '\')'"
                            style="font-size:20px;" class="btn btn-primary">Отправить код повторно
                    </button>
                    <button type="button"
                            th:onclick="'closeCostPriceClient(\'' + ${calculate.id} + '\')'"
                            style="font-size:20px;" class="btn btn-danger confirmButton">Рассчитать
                    </button>
                </div>
            </div>
        </div>
    </div>

</div>
<script type="text/javascript" th:src="@{/js/clients/clients.js}"></script>
</body>
</html>